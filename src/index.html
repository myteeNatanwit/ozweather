<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta http-equiv="content-language" content="en" />
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=0">
<link rel="stylesheet" href="css/jquery.mobile-1.3.2.min.css" />
<script src="js/jquery.min.js"></script>
<script src="js/jquery.mobile-1.3.2.min.js"></script>

<script type="text/javascript" src="js/jquery.bgscroll.js"></script>
<script src="js/yql.js" type="text/javascript"></script>
<link href="css/ozwstyle.css" rel="stylesheet" type="text/css" />
<link href="css/mycss.css" rel="stylesheet" type="text/css" />

<script type="text/javascript">
var interval_id =0;
var mlist="";
$(document).ready(function () {
$("#container").bgscroll({scrollSpeed:15 , direction:'h' });
getstorage();
loadweather();
window.onfocus = function(){location.reload();};

/* ajax query send the location code to forecast */
$('.weather').bind('click', function(e) {
var rootmenu= $(this).attr('id');
if (rootmenu) {
location.href="forecast.html?data="+ rootmenu;
}
});
});

function loadweather() {
var va=[];
for (i=0; i< mlist.length -1; i++) 
{
s= '#'+ mlist[i];
va[0]=mlist[i];
$(s).weatherfeed(va,{link:false});
}
	/*$('#ASXX0001').weatherfeed(['ASXX0001'],{link:false});
	$('#ASXX0016').weatherfeed(['ASXX0016'],{link:false});
	$('#ASXX0023').weatherfeed(['ASXX0023'],{link:false});
	$('#ASXX0032').weatherfeed(['ASXX0032'],{link:false});
	$('#ASXX0047').weatherfeed(['ASXX0047'],{link:false});
	$('#ASXX0057').weatherfeed(['ASXX0057'],{link:false});
	$('#ASXX0075').weatherfeed(['ASXX0075'],{link:false});
	$('#ASXX0089').weatherfeed(['ASXX0089'],{link:false});
	$('#ASXX0112').weatherfeed(['ASXX0112'],{link:false});
*/
}
function getstorage(){
var wlist="ASXX0001,ASXX0016,ASXX0023,ASXX0032,ASXX0047,ASXX0057,ASXX0075,ASXX0087,ASXX0089,ASXX0110,ASXX0112,";
if (localStorage.myweather)
 {
  mlist=localStorage.myweather.split(','); 
  }
else
 { 
   localStorage.myweather=wlist;
   mlist=wlist.split(','); 
  
 } 

 html= '';
 for (i=0; i< mlist.length -1; i++) 
    {
    html+='<li> <div class ="weather" id='+ '"'+   mlist[i] + '"' + '></div></li>';
    }
  $("#container").append(html); 
}

</script>

</head>
<body>

<div data-role="page" id="foo" data-theme="b" >
<div id="header" data-role="header" data-theme="b" data-position="fixed" style="position:fixed; top:0; left:0;">
<span class="ui-title"></span>
<!--a href="#nav-panel" data-role="button" data-icon="bars" data-iconpos="notext" data-inline="true">About  </a-->
<a href="#about" data-iconpos="notext" data-icon="info" data-rel="dialog"  ></a>
<a href="setting.html" rel="external" data-rel="dialog"  data-icon="gear" class="ui-btn-right">Setting</a>
	</div><!-- /header -->
	
<div id="container" >
<ul>

</ul>
</div>

 <div data-role="panel" data-theme="a" id="nav-panel" >
      <div class="panel-content">
      <ul data-role="listview" data-theme="a" class="nav-search">
      <li data-icon="delete"><a href="#" data-rel="close">Close menu</a></li>
      <li><a href="#about" data-rel="dialog" data-close-btn="right" >About</a></li>
      </ul>
    </div><!-- /content wrapper for padding -->
</div><!-- /panel -->

</div><!-- /page -->

<div data-role="page" id="about" >

	<div data-role="header" data-theme="a">
		<h1>OzWeather</h1>
	</div><!-- /header -->

	<div data-role="content" data-close-btn="right" data-theme="a" style="text-align:center;">
	
		<h2><img src="img/w57.png" style="" /> &copy; Incloud </h2>
		<p>version 1.2.4 build 12112013 </p>
		<p><i>Weather data retrieved from public<br>info of Weather.com &amp; Yahoo.com</i></p>
	</div><!-- /content -->

	
</div><!-- /page -->

</body>
</html>